<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="./style.css">
        <title>Rensou</title>
    </head>

    <body>
        <div>
            <span style="display : inline-block" id="spanner">
                
                <div class="resultsboxes">
                    
                    <button class="commaButton" style="visibility: hidden;">　</button>


                    <div class=outputboxes id = outputboxes> 
                        <button class="kanjiList" onclick="kanjiInfo(this.innerHTML)">連</button>
                        <button class="kanjiList" onclick="kanjiInfo(this.innerHTML)">想</button>
                        <button class="kanjiList" onclick="kanjiInfo(this.innerHTML)">漢</button>
                        <button class="kanjiList" onclick="kanjiInfo(this.innerHTML)">字</button>
                        <button class="kanjiList" onclick="kanjiInfo(this.innerHTML)">蝶</button>
                        <button class="kanjiList" onclick="kanjiInfo(this.innerHTML)">番</button>
                    </div>

                    <div class="actionButtons">
                        <button class="commaButton" id="commaButton" onclick="pushKanji(this.innerHTML, this.id);resetColours();">、</button>
                        <button class="commaButton" id="stopButton"  onclick="pushKanji(this.innerHTML, this.id);resetColours();">。</button>
                    </div>
                </div>
              
                
                <button class="newestKanji" id="nk" onclick="kanjiInfo(this.innerHTML)">　</button>
                
                <br>

                <div class="resultsboxes">
                    <button class="resultbox pass" id="rb0" onclick="pushKanji(this.innerHTML, this.id)"></button>              
                    <button class="resultbox pass" id="rb1" onclick="pushKanji(this.innerHTML, this.id)"></button>             
                    <button class="resultbox pass" id="rb2" onclick="pushKanji(this.innerHTML, this.id)"></button>        
                    <button class="resultbox pass" id="rb3" onclick="pushKanji(this.innerHTML, this.id)"></button>        
                    <button class="resultbox pass" id="rb4" onclick="pushKanji(this.innerHTML, this.id)"></button>         
                    <button class="resultbox pass" id="rb5" onclick="pushKanji(this.innerHTML, this.id)"></button> 
                </div>

                <!-- CANVAS SIZING INFO: https://stackoverflow.com/questions/4938346/canvas-width-and-height-in-html5 -->
                <canvas id="canvas" width="250" height="250" style="border: 2px solid; cursor: crosshair;"></canvas>

                <br>
                <button onclick="resetColours(); canvas.erase();">Erase</button>
                <button onclick="resetColours(); canvas.recognize();">Send</button>
                <button onclick="canvas.undo()">Undo</button>
                <br>

            </span>
            <p id="checker"></p>

    <!-- ADD HANDWRITING INPUT CANVAS & FUNCTIONS -->
            <script type="text/javascript" src="handwriting.canvas.js"></script>

            <script type="text/javascript" defer="">    // PROVIDE SETTINGS FOR HANDWRITING CANVAS

                var canvas = new handwriting.Canvas(document.getElementById('canvas'), 3);
                    canvas.setOptions({language: "ja", numOfWords: 1, numOfReturn: 6,});

                // なんであるか
                // var width = document.getElementById("demo").clientWidth;    
                // canvas.cxt.canvas.width  = width < 400 ? width : 400;
                // canvas.cxt.canvas.height = width < 400 ? width : 400;
                
                canvas.set_Undo_Redo(true, false);  //ONLY TURN ON UNDO FUNCTIONALITY
                canvas.setLineWidth(8);

            /*
                fitToContainer(canvas);

                function fitToContainer(canvas){
                // Make it visually fill the positioned parent
                canvas.style.width ='100%';
                canvas.style.height='100%';
                // ...then set the internal size to match
                canvas.width  = canvas.offsetWidth;
                canvas.height = canvas.offsetHeight;
                } 
                                                    */
                

                // THIS CODE LOADS THE "results" <BUTTONs> WITH INFO
                // see lines 230-237 in handwriting.canvas.js
                // see <BUTTON> class "resultsboxes"
                canvas.setCallBack(function(data, err) {  
                    if (err) {                           
                        throw err;
                    }
                    else {   
                        for (i=0;i<6;i++) {
                            if (data[i] == null ) {
                                continue;
                            }
                            else {
                                document.getElementById("rb" + i).innerHTML = data[i];
                            }
                        }
                    }       
                });
                
            </script>

    <!-- ADD DICTIONARY AND HELPER FUNCTIONS -->
            <script type="text/javascript" src="./minifiedDictionary.js"></script>
            <script src="./helpers.js"></script>


        </div>
    </body>
</html>
